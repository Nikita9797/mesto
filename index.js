(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}e.d({},{zn:()=>he,fT:()=>me,Ph:()=>ye,ip:()=>_e,eY:()=>pe});var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"isCurrentUserOwner",value:function(e,t){return e===t}},{key:"renderItems",value:function(){var e=this;this._renderedItems.reverse().forEach((function(t){e._renderer(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._element=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._element.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._popup=document.querySelector(e),n._handleSubmit=t,n._popupDeleteMessageOk=n._popup.querySelector(".popup__button"),n}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;l(f(u.prototype),"setEventListeners",this).call(this),this._popupDeleteMessageOk.addEventListener("click",(function(){e._handleSubmit()}))}},{key:"open",value:function(e){l(f(u.prototype),"open",this).call(this),this.currentCard=e}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(u);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmit=t,n._form=n._element.querySelector(".popup__inputs"),n._inputList=n._element.querySelectorAll(".popup__input-text"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues.likes=[],this._formValues}},{key:"setEventListeners",value:function(){var e=this;d(_(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())}))}},{key:"close",value:function(){d(_(u.prototype),"close",this).call(this),this._form.reset()}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(u);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var g=function(){function e(t){var n=t.nameSelector,r=t.statusSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameInput=document.querySelector(n),this._statusInput=document.querySelector(r)}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return{name:this._nameInput.textContent,status:this._statusInput.textContent}}},{key:"setUserInfo",value:function(e){this._nameInput.textContent=e.name,this._statusInput.textContent=e.status}}],n&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImageElement=t._element.querySelector(".popup__image"),t._popupImageText=t._element.querySelector(".popup__sub-text"),t}return t=u,(n=[{key:"open",value:function(e){E(j(u.prototype),"open",this).call(this),this._popupImageElement.src=e.link,this._popupImageElement.alt=e.name,this._popupImageText.textContent=e.name}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(u);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._popup=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form=this._popup.querySelector(this._formSelector),this._setEventListener(this._form)}},{key:"_setEventListener",value:function(e){var t=this;this._formInputs=Array.from(e.querySelectorAll(this._inputSelector)),this._formButton=e.querySelector(this._submitButtonSelector),this._formInputs.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._hasInvalidInput()?t.disableButton():t._enableButton()}))}))}},{key:"_checkInputValidity",value:function(e){this._currentInputErrorContainer=document.querySelector(".".concat(e.id,"-error")),e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e,e.validationMessage)}},{key:"_showErrorMessage",value:function(e,t){this._currentInputErrorContainer.classList.add(this._errorClass),this._currentInputErrorContainer.textContent=t,e.classList.add(this._inputErrorClass)}},{key:"_hideErrorMessage",value:function(e){this._currentInputErrorContainer.classList.remove(this._errorClass),this._currentInputErrorContainer.textContent="",e.classList.remove(this._inputErrorClass)}},{key:"_hasInvalidInput",value:function(){return this._formInputs.some((function(e){return!e.validity.valid}))}},{key:"_enableButton",value:function(){this._formButton.classList.remove(this._inactiveButtonClass),this._formButton.removeAttribute("disabled")}},{key:"disableButton",value:function(){this._formButton.classList.add(this._inactiveButtonClass),this._formButton.setAttribute("disabled",!0)}},{key:"resetValidation",value:function(){var e=this;this._formInputs.forEach((function(t){e._checkInputValidity(t),e._hasInvalidInput()?e.disableButton():e._enableButton()}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=document.querySelector(".profile__name"),T=document.querySelector(".profile__status"),B=document.querySelector(".profile__overlay"),x=document.querySelector(".profile__image"),R=document.querySelector(".popup_el_profile-edit"),U=document.querySelector(".popup_el_add-card"),D=document.querySelector(".popup_el_popup-image"),V=R.querySelector(".popup__close-button"),A=R.querySelector(".popup__input-text_el_name"),M=R.querySelector(".popup__input-text_el_status"),F=document.querySelector(".profile__edit-button"),N=U.querySelector(".popup__close-button"),J=document.querySelector(".add-button"),z=D.querySelector(".popup__close-button"),H=document.querySelector(".popup_el_popup-delete").querySelector(".popup__close-button"),Y=document.querySelector(".popup_el_set-avatar"),G=Y.querySelector(".popup__close-button"),K={formSelector:".popup__inputs",inputSelector:".popup__input-text",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_inactive",inputErrorClass:"popup__input-text_type_error",errorClass:"popup__input-text-error_visible"},Q=new L(K,R),W=new L(K,U),X=new L(K,Y);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Z(o)?o:String(o)),r)}var o}var ee=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e=this;return fetch("https://nomoreparties.co/v1/cohort-66/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(t){return e._id=t._id,t})).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("https://nomoreparties.co/v1/cohort-66/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"setUserInfo",value:function(e,t){return fetch("https://nomoreparties.co/v1/cohort-66/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addNewCard",value:function(e,t){return fetch("https://mesto.nomoreparties.co/v1/cohort-66/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-66/cards/".concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-66/cards/".concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeCardDelete",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-66/cards/".concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"setAvatar",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-66/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getUserId",value:function(){return this._id}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66",headers:{authorization:"4a6ef0c5-9780-4b1d-beb1-fe5189f66d0b","Content-Type":"application/json"}});function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===te(o)?o:String(o)),r)}var o}var re=function(){function e(t,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._name=t.name,this._link=t.link,this._likeCount=t.likes.length,this._templateSelector=n,this.id=t._id,this.likes=t.likes,this._owner=t.owner,this._currentUserId=u,this.handleCardClick=r,this.handleLikeClickOnFunc=o,this.handleLikeClickOffFunc=i}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._elementCardImage.addEventListener("click",(function(){e.handleCardClick()})),this._elementLikeButton.addEventListener("click",(function(){e.isLike()?(e.handleLikeClickOffFunc(),e._likeCount--):(e.handleLikeClickOnFunc(),e._likeCount++),e._toggleLikeStatus(),e._element.querySelector(".card__like-counter").textContent=e._likeCount}))}},{key:"_createImagePopup",value:function(){this._popupImageElement.src=this._link,this._popupImageElement.alt=this._name,this._popupImageText.textContent=this._name}},{key:"_toggleLikeStatus",value:function(){this._elementLikeButton.classList.toggle("card__like_active")}},{key:"isLike",value:function(){var e=this;return this.likes.find((function(t){if(t._id===e._currentUserId)return!0}))}},{key:"_createCardElements",value:function(){this._element=this._getTemplate(),this._elementCardImage=this._element.querySelector(".card__image"),this._elementLikeButton=this._element.querySelector(".card__like"),this._popupImage=document.querySelector(".popup_el_popup-image"),this._popupImageElement=this._popupImage.querySelector(".popup__image"),this._popupImageText=this._popupImage.querySelector(".popup__sub-text"),this._cardIcon=this._popupImage.querySelector(".popup__close-icon"),this._likeCounter=this._element.querySelector(".card__like-counter"),this.isLike()&&this._elementLikeButton.classList.add("card__like_active"),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__text").textContent=this._name,this._element.querySelector(".card__like-counter").textContent=this._likeCount}},{key:"generateCard",value:function(){return this._createCardElements(),this._setEventListeners(),this._element}}])&&ne(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===oe(o)?o:String(o)),r)}var o}function ue(){return ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ue.apply(this,arguments)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(r);if(o){var n=ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t,n,r,o,c,a){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(l=i.call(this,e,t,n,r,o,a))._handleOnTrashButtonClickFunc=c,l}return t=u,(n=[{key:"_setEventListeners",value:function(){var e=this;ue(ae(u.prototype),"_setEventListeners",this).call(this),this._elementTrashButton.addEventListener("click",(function(){e._handleOnTrashButtonClickFunc()}))}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"generateCard",value:function(){return ue(ae(u.prototype),"_createCardElements",this).call(this),this._elementTrashButton=this._element.querySelector(".card__trash"),this._setEventListeners(),this._element}}])&&ie(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(re);function se(e,t,n){var r=new le(e,t,n,(function(){ee.likeCard(r.id).then((function(e){r.likes=e.likes}))}),(function(){ee.likeCardDelete(r.id).then((function(e){r.likes=e.likes}))}),(function(){me.open(r)}),ee.getUserId());return r.generateCard()}function fe(e,t){var n=document.querySelector(e),r=n.querySelector(".popup__button");n.querySelector(".popup__button").textContent="Сохранение...",r.textContent=t?"Сохранение...":"Сохранить"}Q.enableValidation(),W.enableValidation(),X.enableValidation(),ee.getUserInfo().then((function(e){q.textContent=e.name,T.textContent=e.about,x.src=e.avatar})),ee.getInitialCards().then((function(e){var t=new r({items:e,renderer:function(e){if(t.isCurrentUserOwner(ee.getUserId(),e.owner._id)){var n=se(e,"#card-user-template",(function(){de.open(e)}));t.addItem(n)}else{var r=(o=new re(e,"#card-template",(function(){de.open(e)}),(function(){ee.likeCard(o.id).then((function(e){o.likes=e.likes}))}),(function(){ee.likeCardDelete(o.id).then((function(e){o.likes=e.likes}))}),ee.getUserId()),o.generateCard());t.addItem(r)}var o}},".cards");return t})).then((function(e){e.renderItems()}));var pe=new g({nameSelector:".profile__name",statusSelector:".profile__status"}),ye=new v(".popup_el_profile-edit",(function(e){fe(".popup_el_profile-edit",!0),ee.setUserInfo(e.name,e.status).finally((function(){fe(".popup_el_profile-edit",!1)})),pe.setUserInfo(e),ye.close()})),he=new v(".popup_el_add-card",(function(e){fe(".popup_el_add-card",!0),ee.addNewCard(e.name,e.link).then((function(t){document.querySelector(".cards").prepend(se(t,"#card-user-template",(function(){de.open(e)}))),W.disableButton(),he.close()})).finally((function(){fe(".popup_el_add-card",!1)}))})),de=new C(".popup_el_popup-image"),me=new p(".popup_el_popup-delete",(function(){ee.deleteCard(me.currentCard.id).then((function(){me.currentCard.deleteCard(),me.close()}))})),_e=new v(".popup_el_set-avatar",(function(e){fe(".popup_el_set-avatar",!0),ee.setAvatar(e.src).then((function(e){x.src=e.avatar,_e.close()})).finally((function(){fe(".popup_el_set-avatar",!1)}))}));F.addEventListener("click",(function(){var e;ye.open(),e=pe.getUserInfo(),A.value=e.name,M.value=e.status,Q.resetValidation()})),V.addEventListener("click",(function(){return ye.close()})),J.addEventListener("click",(function(){he.open(),W.disableButton()})),N.addEventListener("click",(function(){return he.close()})),z.addEventListener("click",(function(){return de.close()})),H.addEventListener("click",(function(){return me.close()})),B.addEventListener("click",(function(){_e.open(),X.disableButton()})),G.addEventListener("click",(function(){return _e.close()})),ye.setEventListeners(),he.setEventListeners(),de.setEventListeners(),me.setEventListeners(),_e.setEventListeners()})();